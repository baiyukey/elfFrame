$(function(){var i=window.top.location.pathname.replace(".html","");var e="";var j=function(){var n="";var m=function(s,E){var v=s;var D=$("#"+v);var C=typeof(E)!=="undefined"?E:undefined;var t;var y="";var x="";var o="";var r="elfFrame"+c();var p=function(K){var ab=K;var Y=$("#"+x);var S=$("#"+o);S.attr("src",ab);var I=Y.width();var M=Y.height();var P=Math.min(750,window.myPage.fadeTime*2.5);var V=$("a[href!='#']");var Q=$("iframe","#elfFramePages");var G=Q.length>=1?Q.eq(0).attr("src"):"";var W=Q.length>1?Q.eq(1).attr("src"):"";var T=function(){Y.attr("src","about:blank");try{Y[0].contentWindow.document.write("");Y[0].contentWindow.document.clear()}catch(ad){}Y.remove();$(S[0].contentDocument).ready(function(){if(elf&&elf.iframeResize){elf.iframeResize()}});$("#elfFramePages").css({width:"100%",position:"relative"}).find("iframe.elfFrameSubPage").css({width:"100%"});if(typeof(C)!=="undefined"){C.call(this)}};var U=function(){Y.smooth({left:I},P);S.smoothStop(true,false).css({position:"absolute",left:I}).show().smooth({left:"0"},P,T)};var R=function(){Y.smooth({left:(Z*(0-I))},P);S.smoothStop(true,false).css({position:"absolute",left:(Z*I)}).show().smooth({left:"0"},P,T)};var O=function(){Y.smoothStop().smooth({top:(Z*(0-M))},P);S.smoothStop(true,false).css({position:"absolute",top:Z*M}).show().smooth({top:"0"},P,T)};var N=function(){Y.smoothOut(P);S.smoothStop(true,true).css({position:"absolute",top:0,opacity:0}).show().smooth({opacity:1},P,T)};var L=function(){Y.remove();S.css({position:"absolute",top:0});setTimeout(function(){S.show();T()},10)};var F={"0":L,"1":U,"2":R,"3":O,"4":N};var X=function(ag){var af=ag?ag.split("?")[0]:"";var ad=-1;for(var ae=0;ae<V.length;ae++){if(V.eq(ae).attr("href").replace(/[./]+/,"")===af.replace(/[./]+/,"")){ad=ae;break}}return ad};var H=X(G),ac=X(W);var Z=H>ac?1:-1;var aa=new Date().getTime()+10000;var J=function(ad){if(S.attr("src")&&$(S[0].contentWindow.document.body).html()!==""){setTimeout(F[ad],0)}else{if(new Date().getTime()>aa){elf.alertInfo("加载页面超时,请重试.");return false}if(typeof(window.tryNewPageTimeout!=="undefined")){clearTimeout(window.tryNewPageTimeout)}window.tryNewPageTimeout=setTimeout(J,20,ad)}};if(Y.length>0){if(typeof(F[window.elfFrame[i].animateConvert])!=="undefined"&&H>=0&&ac>=0){J(window.elfFrame[i].animateConvert)}else{if(H<0||ac<0){J(0)}else{J(0)}}}else{J(0)}};if(v!=="page"){D.empty();var B=D.attr("data-src");y=B+(/\?/.test(B)?"&":"?")+"v="+r;D.load(y,l(v,C))}else{var u=$("#elfFramePages");if(u.length===0){if(console){console.log("框架页未找到%c#elfFramePages%c,页面加载被中断","color:red;font-size:24px;font-family:'微软雅黑',sans-serif","")}return false}if(u.find("iframe").length===0){u.html('<iframe frameborder="0" scrolling="no"></iframe>')}$("iframe:gt(0)","#elfFramePages").remove();$(".showPanel").remove();$(".disableMark").remove();$("#markDiv").remove();try{if(location.hash!==""){n=elf.decodeHex(location.hash.replace("#",""))}else{if(u[0].hasAttribute("data-src")){n=u.attr("data-src").replace(".html","");u.removeAttr("data-src")}else{if(window.elfFrame[i]["homePage"]){n=window.elfFrame[i]["homePage"].replace(".html","")}}}if(n===""){if(console){console.log("%c首页地址错误,程序被中断.","color:#ff0000;")}return false}}catch(z){if(console){console.log('%c可能未定义window["elfFrame"][thisPageName].homePage',"color:#ff0000")}return false}var w=n.split("?")[1]?"?"+n.split("?")[1]:"";n=n.split("?")[0];t=n+".html"+w+(w===""?"?":"&")+"v="+r;var A=u.width();var q=u.height();x="oldSubPage"+new Date().getTime();o="newSubPage"+new Date().getTime();$("html,body").smoothStop(true,false).smooth({scrollTop:0},window.myPage.fadeTime*2);if(u.find("iframe[src]").length!==0){u.find("iframe[src]:eq(0)").addClass("elfFrameSubPage").attr("id",x).css({position:"absolute",width:A,height:q,"z-index":1}).before('<iframe style="z-index:0;display:none;width:'+A+"px;height:"+q+'px" frameborder="0" scrolling="no" class="elfFrameSubPage"  id="'+o+'"></iframe>')}else{u.find("iframe:eq(0)").addClass("elfFrameSubPage").attr("id",o).css({width:A,height:q,"z-index":1})}y=t;p(y)}};var l=function(p,o){return function(){var q=$("#"+p);q.off("click").on("click","a",a);if(q.find(".leftMenu").length>0){b()}if(typeof(o)!=="undefined"){o.call(this)}}};var k=function(){var o="时代在进步！为了更好的用户体验，强烈建议您使用现代浏览器(例如chrome,fireFox等)或IE的最新版本。";if($.support.leadingWhitespace===false&&$("#updateIndicate").length===0){$("header").attr("title",o);$("body").prepend('<div id="updateIndicate" style="width:100%; height:30px; line-height:30px; font-size:13px; color:#f03a08; text-align:center;background:#fcf6df;">'+o+'<a href="http://windows.microsoft.com/zh-cn/internet-explorer/download-ie" target="_blank" style="font-size:1em; color:#3791ed">点此升级</a></div>')}};this.loadElement=m;this.checkBrowser=k};var a=function(k){var m=$(this);if(m.hasClass("disable")||m.hasClass("current")){return false}var l=function(p){var n=p.attr("href");var o=n.replace(".html","");window.top.location.hash="#"+elf.encodeHex(o)};if(m[0].hasAttribute("target")){if(window!==window.top&&m.attr("target")==="_self"&&m[0].hasAttribute("href")&&$.inArray(m.attr("href"),["","#"])<0&&m.attr("href").indexOf("mailto")<0){k.preventDefault();l(m)}if(m.attr("href").indexOf("mailto")>=0&&m.attr("target")!=="_blank"){k.preventDefault();m.attr("target","_blank");a(k)}}else{k.preventDefault();if(m[0].hasAttribute("href")&&$.inArray(m.attr("href"),["","#"])<0){l(m)}}};var b=function(){var k=$(".leftMenu");var n=typeof($.cookie("perms"))!=="undefined"?elf.decodeHex($.cookie("perms")).split("&"):[];var m=function(){var o=$(this).closest(".hasList");var r=o.parent();if(o.length===0){return false}var q=function(){if(!r.hasClass("unfold")){o.find("ul.dir2").css({display:"block"}).stop(false,true).slideUp(window.myPage.fadeTime).end().removeClass("unfold")}};var p=function(){o.find("ul.dir2").stop(false,true).slideDown(window.myPage.fadeTime).end().addClass("unfold");if(!r.hasClass("unfold")){o.siblings("li.hasList").removeClass("unfold").find("ul.dir2").stop(true,true).slideUp(window.myPage.fadeTime)}};o.hasClass("unfold")?q():p()};for(var l=0;l<n.length;l++){k.find("#dir_"+n[l]).removeClass("displayNone")}k.find("ul.dir").children("li.displayNone").remove();$(document).on("click",".leftMenu li.hasList p a",m)};var g=function(){var k=function(){var m=$($(".elfFrameSubPage")[0].contentWindow.document).attr("title");$(window.top.document).attr("title",m)};var l=function(){var m=$(".elfFrameSubPage").eq(0).attr("src").split("?")[0].replace(/[./]+/,"");var n=new Date().getTime();var o=function(){var p=$("a[href!=#]","[data-src]").removeClass("current");if(p.length===0&&(new Date().getTime()-n)<5000){if(typeof(window.waitFixLeftMenu)!=="undefined"){clearTimeout(window.waitFixLeftMenu)}window.waitFixLeftMenu=setTimeout(o,500);return false}p.each(function(q,r){if($(r).attr("href").replace(/[./]+/,"")===m){$(r).addClass("current");$(r).closest("li").addClass("unfold")}})};o()};k();l();$($("#elfFramePages").find("iframe")[0].contentWindow.document).on("click","a",a);$("html,body").smoothStop(true,false).smooth({scrollTop:0});$(".showPanel").each(function(m,n){if($(n).find(".alertCont")){$(n).find(".alertCont").find("p").text()==="网络连接失败！"||$(n).find(".alertCont").text()===""?$(n).children(":eq(1)").elfAlertExit():null}})};var c=function(n){var l=new Date();var k=n||2;k=Math.min(24,k);var m=/^((192\.168|172\.([1][6-9]|[2]\d|3[01]))(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){2}|10(\.([2][0-4]\d|[2][5][0-5]|[01]?\d?\d)){3})|(localhost)$/.test(window.location.hostname)?"":".min";return m===""?""+l.getTime():""+(l.getMonth()+1)+l.getDate()+Math.ceil((l.getHours()+1)/k)};var h=function(){var l=function(){f.loadElement("page",g)};if(("onhashchange" in window)&&((typeof(document.documentMode)==="undefined")||document.documentMode===8)){window.onhashchange=l}else{if(typeof(elfHash)==="undefined"){window.elfHash=window.location.hash}var k=function(){if(window.elfHash!==window.location.hash){window.elfHash=window.location.hash;l()}};setInterval(k,150)}};if(typeof(window.elfFrame)==="undefined"&&typeof(window.elfFrame[i])!=="undefined"){alert('呃!config.js中未配置window["elfFrame"]["'+i+'"]或未获取到相关信息,elfFrame已终止');return false}e=c();var f=new j();var d=function(l){var m=$(l);var k="";if(m.attr("id")){k=m.attr("id")}else{k="elf_"+m.attr("data-src").replace(/[\\.\/]/g,"_")+"_"+e}m.attr("id",k);f.loadElement(k)};$("[data-src]:not(#elfFramePages)").each(function(k,l){if($(l).attr("data-src")!==""){d(l)}});f.loadElement("page",g);f.checkBrowser();h()});