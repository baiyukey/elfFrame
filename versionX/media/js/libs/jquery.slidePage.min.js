$.fn.extend({slidePage:function(c){var n=$(this);var u=$("body");var m=$.extend({area:u,method:"left",x:"right",y:"top",width:"auto",height:"auto",initFnt:null,initFntArr:undefined,callback:null,callbackArr:undefined},c);if($.inArray(m.method,["left","right","up","down","exit"])<0){console.log("%cmethod的参数只有:left(默认),right,up,down,exit(滑出)","color:red");return false}var o=/^\d+\.*\d*%$/;var g=/^\d+\.*\d*$/;if(g.test(parseFloat(m.x).toString())===false&&$.inArray(m.x,["left","center","right"])<0){console.log("%cx的参数只有:left,center,right(默认),或者数字","color:red");return false}if(g.test(parseFloat(m.y).toString())===false&&$.inArray(m.y,["top","middle","bottom"])<0){console.log("%cy的参数只有:top(默认),middle,bottom,或者数字","color:red");return false}var r={fadeTime:typeof(window.myPage)!=="undefined"?window.myPage.fadeTime:0};if(n.parent().hasClass("slidePageBody")){m.method="exit"}if(m.method==="exit"){n[0].slidePageCallback=m.callback;n[0].slidePageCallbackArr=m.callbackArr;n.closest(".slidePageBody").find("a.slidePageClose:eq(0)").trigger("click");return this.each(function(){})}var d=function(){var E=window.getComputedStyle(m.area[0]);var J=parseFloat(E.width)+parseFloat(E["padding-left"])+parseFloat(E["padding-right"]);var I=parseFloat(E.height)+parseFloat(E["padding-top"])+parseFloat(E["padding-bottom"]);var D=J+parseFloat(E["border-left-width"])+parseFloat(E["border-right-width"]);var F=I+parseFloat(E["border-top-width"])+parseFloat(E["border-bottom-width"]);var K={thisLeft:0,thisTop:0,thisWidth:m.width==="auto"?J:(o.test(m.width)?parseFloat(m.width)/100*J:parseFloat(m.width)),thisHeight:m.height==="auto"?I:(o.test(m.height)?parseFloat(m.height)/100*I:parseFloat(m.height)),borderRadius:E["border-radius"]};if(K.thisWidth!==J||K.thisHeight!==I){var C=["0","0","0","0"];if(K.thisWidth===J&&K.thisHeight!==I){if(m.y==="top"||m.y===0||m.y==="0%"){C[0]=E["border-top-left-radius"];C[1]=E["border-top-right-radius"]}else{if(m.y==="bottom"||m.y===100||m.y==="100%"){C[2]=E["border-bottom-right-radius"];C[3]=E["border-bottom-left-radius"]}}}else{if(K.thisWidth!==J&&K.thisHeight===I){if(m.x==="left"||m.x===0||m.x==="0%"){C[0]=E["border-top-left-radius"];C[3]=E["border-bottom-left-radius"]}else{if(m.x==="right"||m.x===(J-K.thisWidth)){C[1]=E["border-top-right-radius"];C[2]=E["border-bottom-right-radius"]}}}}K.borderRadius=C.join(" ")}var H=function(L){var M={left:m.area.offset().left+parseFloat(E["border-left"]),center:m.area.offset().left+((D-K.thisWidth)/2),right:m.area.offset().left+(D-K.thisWidth)-parseFloat(E["border-left"])};if(o.test(L.toString())){return m.area.offset().left+(parseFloat(L)/100*J)+parseFloat(E["border-left"])}else{if(g.test(parseFloat(L).toString())){return m.area.offset().left+parseFloat(m.area.css("border-left-width"))+parseFloat(L)+parseFloat(E["border-left"])}else{return M[L]}}};var G=function(L){var M={top:m.area.offset().top+parseFloat(E["border-top"]),middle:m.area.offset().top+((I-K.thisHeight)/2),bottom:m.area.offset().top+Math.max(0,(I-K.thisHeight))};if(o.test(L.toString())){return m.area.offset().top+(parseFloat(L)/100*I)}else{if(g.test(parseFloat(L).toString())){return m.area.offset().top+parseFloat(m.area.css("border-top-width"))+parseFloat(L)}else{return M[L]}}};K.thisLeft=H(m.x);K.thisTop=G(m.y);K.thisHeight=I+parseFloat(E["border-top"])-(K.thisTop-parseFloat(m.area.offset().top));return K};var A=d();var i=typeof n.attr("style")==="undefined"?"":n.attr("style");var b=typeof m.area.attr("style")==="undefined"?"":m.area.attr("style");var h=(typeof(m.area.attr("sizeLinkId"))==="undefined"||m.area.attr("sizeLinkId")==="")?n.attr("id"):function(){var E=m.area.attr("sizeLinkId").split(",");var C=[];for(var D=0;D<E.length;D++){if(E[D]!==""){C.push(E[D])}}if($.inArray(n.attr("id"),C)<0){C.push(n.attr("id"))}return C.join(",")}();var z=new Date().getTime();var s="slidePage_"+m.method+"_"+z;var j="slidePageControl_"+z;var B="slidePageBody_"+z;var q="newPosition_"+z;var k="originalPosition_"+z;var v="position:absolute;z-index:100;width:"+A.thisWidth+"px;height:"+A.thisHeight+"px;left:"+A.thisLeft+"px;top:"+A.thisTop+"px;border-radius:"+A.borderRadius+";overflow:hidden;";var p=function(D){var C={init:{},finish:{},exit:{},closeIcon:""};switch(D){case"left":C.init={left:A.thisWidth+"px"};C.finish={left:"0px"};C.exit={left:A.thisWidth+"px"};C.closeIcon="iconDoubleAngleRight";break;case"right":C.init={left:(0-A.thisWidth)+"px"};C.finish={left:"0px"};C.exit={left:(0-A.thisWidth)+"px"};C.closeIcon="iconDoubleAngleLeft";break;case"up":C.init={left:"0px",top:A.thisHeight+"px"};C.finish={top:"0px"};C.exit={left:"0px",top:A.thisHeight+"px"};C.closeIcon="iconDoubleAngleDown";break;case"down":C.init={left:"0px",top:(0-A.thisHeight)+"px"};C.finish={top:"0px"};C.exit={left:"0px",top:(0-A.thisHeight)+"px"};C.closeIcon="iconDoubleAngleUp";break;default:C.init={left:A.thisWidth+"px"};C.finish={left:"0px"};C.exit={left:A.thisWidth+"px"};C.closeIcon="";break}return C};var y=p(m.method);var f=function(I){I.preventDefault();if($(this).hasClass("slidePageExit")){$(this).closest(".slidePage").find("p.slidePageControl").find("a.slidePageClose").trigger("click");return false}var E=$(this).closest(".slidePage");var K=$(this).closest(".slidePageBody");var L=$("#originalPosition_"+z);var J=K.children(":eq(1)");var D=L.text();var C=h.replace(J.attr("id"),"").split(",");var G=[];for(var F=0;F<C.length;F++){if(C[F]!==""){G.push(C[F])}}h=G.join(",");clearInterval(window["fix_slidePage_"+z]);window.removeEventListener("resize",x);K.find("[indicate]").each(function(M,N){$("#errorItem"+$(N).attr("indicate")).remove()});$(this).css("visibility","hidden");var H=function(){J.attr("style",D);m.area.attr("style",b);L.replaceWith(J);E.remove();if(typeof(J[0].slidePageCallback)==="function"&&J[0].slidePageCallbackArr!=="undefined"){J[0].slidePageCallback.apply(this,J[0].slidePageCallbackArr)}delete J[0].slidePageCallback;delete J[0].slidePageCallbackArr;if(typeof(elf.iframeResize)!=="undefined"){elf.iframeResize()}};if($.fn.smooth){K.smoothStop(true,false).smooth(y.exit,r.fadeTime,H,"easeIn")}else{K.stop(true,false).animate(y.exit,r.fadeTime,"swing",H)}};var t=function(E){var F;var C=[];for(var D=0;D<E.length;D++){F=$("#"+E[D]);C.push((F.outerHeight()+F.parent().find(".slidePageControl").outerHeight()))}return Math.max.apply(this,C)};var w=function(){var C=t(m.area.attr("sizeLinkId").split(","));C=Math.max(C,A.thisHeight);a.css("height",C);$("#"+s).smoothStop(true,false).smooth({height:C},r.fadeTime,false,"Linear")};var x=function(){A=d();v="position:absolute;z-index:100;width:"+A.thisWidth+"px;height:"+A.thisHeight+"px;left:"+A.thisLeft+"px;top:"+A.thisTop+"px;border-radius:"+A.borderRadius+";overflow:hidden;";$("#"+s).attr("style",v);$("#"+B).smoothStop(true,false).smooth({width:A.thisWidth,height:A.thisHeight})};$("div.indicate").remove();u.append('<div class="slidePage"  id="'+s+'" style="'+v+'"><div id="'+B+'" class="slidePageBody" style="position:relative;width:'+A.thisWidth+"px;height:"+A.thisHeight+'px"><p id="'+j+'" class="slidePageControl pd5"><a class="slidePageClose" href="#"><i class="'+y.closeIcon+' font18"></i>&nbsp;<span style="font-size:0.75rem;vertical-align:middle;">返回</span></a></p><div id="'+q+'"></div></div></div>');n.after('<div id="'+k+'" style="display:none;">'+i+"</div>");$("#"+q).replaceWith(n);var e=$("#"+s);var a=$("#"+B);var l=function(){if($.inArray(m.area[0].tagName.toLowerCase(),["body","article"])>=0&&m.area.offset().top<window.scrollY){$("html,body")[$.fn.smooth?"smooth":"animate"]({scrollTop:m.area.offset().top},r.fadeTime)}if(typeof m.callback==="function"){m.callback.call(this,m.callbackArr)}window["fix_slidePage_"+z]=setInterval(w,500)};if(typeof m.initFnt==="function"){m.initFnt.call(this,m.initFntArr)}n.show();m.area.attr("sizeLinkId",h);if(!$.fn.smooth){a.smoothStop(true,false).css(y.init).smooth(y.finish,r.fadeTime,l,"easeOut")}else{a.stop(true,false).css(y.init).animate(y.finish,r.fadeTime,"swing",l)}e.one("click",".slidePageClose",f);e.one("click",".slidePageExit",f);window.removeEventListener("resize",x);window.addEventListener("resize",x);return this.each(function(){})}});