(function(a){a.fn.extend({pageNumber:function(c){var w=a.extend({pageCount:0,pageCurrent:1,perPageButtonCount:8,callback:false,callbackArr:null,keyEvent:true},c);var g=a(this);var p=Number(w.pageCount);var l=Number(w.pageCurrent);var j=Number(w.perPageButtonCount);var u;var n;var x;var e="";var r;var t;var d;var b="page"+a(this).attr("id");var o=function(i){return i===l?"pageNum current curr":"pageNum"};p<=0?p=1:null;r=l-(l%j);t=r+j-1;r=r===0?1:r;t=t>p?p:t;l=l>p?p:l;u=l===1?"":'<a id="0___'+b+'" href="#" class="homePageLink">首页</a><a id="'+(l-2)+"__"+b+'" href="#" class="prevPageLink">上页</a>';n=r>=j?'<a id="'+(r-2)+"_"+b+'" href="#" class="pagePrev">..'+(r-1)+"</a>":"";for(var s=r;s<=t;s++){n+=('<a id="'+(s-1)+""+b+'" href="#" class="'+o(s)+'">'+s+"</a>")}n+=t<p?'<a id="'+t+"_"+b+'" href="#" class="pageNext">'+(t+1)+"..</a>":"";x=l===p?'<span class="lastPageIndicate">当前是末页！</span>':'<a id="'+l+"__"+b+'" href="#" class="nextPageLink">下页</a><a id="'+(p-1)+"___"+b+'" href="#" class="lastPageLink">末页</a>';x+=('<span class="pageCount">'+l+"/"+p+"</span>");if(p>1){if(l===p||l<0){d=1}else{if(l>p){d=p}else{d=l+1}}e='<p class="displayIB jumpBox"><span>&nbsp;&nbsp;跳转到：</span><input type="number" class="inputPageNum" value="'+d+'" min="1" max='+p+'><a href="#" class="jumpButton">Go</a></p>'}g.addClass("pageNumberBox").html('<p class="pageBox">'+u+n+x+"</p>"+e);if(x!==""){g.find("input.inputPageNum").on("keyup",this,function(i){i=(i)?i:((window.event)?window.event:"");var y=i.keyCode?i.keyCode:i.which;if(parseInt(a(this).val())>parseInt(a(this).attr("max"))){a(this).val(a(this).attr("max"))}if(y===13){g.find("a.jumpButton").trigger("click").trigger("keyup")}})}var q=function(z){var y=typeof(z)==="undefined"?window:z;var i=y?a(y.document).find(".pageNumberBox.current").eq(0):[];if(i.length===0&&y!==window.top){q(y.parent);return false}if(i.length===0){i=false}return i};var m=function(i){var y=function(){var A=q();if(!A){return false}i=(i)?i:((window.event)?window.event:"");var z=i.keyCode?i.keyCode:i.which;var B=function(C){if(C===37&&l>1){A.find("a.prevPageLink").trigger("click")}else{if(C===39&&l<p){A.find("a.nextPageLink").trigger("click")}}};if(a("body").find("input:focus").length===0){B(z)}};if(typeof(window.waitCheckPageBoxKey)!=="undefined"){clearTimeout(window.waitCheckPageBoxKey)}window.waitCheckPageBoxKey=setTimeout(y,100)};var k=function(){var A=f();var C=3;A.removeClass("current");var z=a(this);z.addClass("current");if(p<=1){return false}if(!document.getElementById("pageBoxHelp")){a("body").append('<p style="position:absolute;font-size:0.75rem;line-height:'+z.height()+'px;display:none;z-index:9999999" id="pageBoxHelp"><i class="iconKeyboard font16 vTop"></i><span class="vMiddle mgl5">敲击 &larr; &rarr; 左右键可翻页&nbsp;</span></p>')}if(typeof(z[0]["showHelp"])==="undefined"){z[0]["showHelp"]=0;z[0]["showHelpSwitch"]=0}var B=a("#pageBoxHelp");if(z[0]["showHelp"]<C&&z[0]["showHelpSwitch"]===0){z[0]["showHelpSwitch"]=1;var y=window.getComputedStyle(z[0])["text-align"];var i={top:0,left:0};if(y==="left"){i.top=z.find(".pageBox").offset().top;i.left=z.find(".pageBox").offset().left+z.find(".pageBox").width()+z.find(".jumpBox:visible").outerWidth()+15}else{if(y==="right"){i.top=z.find(".pageBox").offset().top;i.left=z.find(".pageBox").offset().left-B.width()-5}else{i.top=z.find(".pageBox").offset().top-B.height()-5;i.left=z.find(".pageBox").offset().left+(z.find(".pageBox").width()+z.find(".jumpBox:visible").outerWidth()-B.width())/2}}B.smoothStop(true,false).css({left:i.left,top:i.top,opacity:1}).show().smoothOut(3000,function(){z[0]["showHelp"]+=1;z[0]["showHelpSwitch"]=0;if(z[0]["showHelp"]<C){g.one("mouseenter",this,k)}})}};var h=function(){a("#pageBoxHelp").stop(true,false).fadeOut();g.one("mouseenter",this,k)};var f=function(){var z=a(".pageNumberBox");var A=typeof(window.top.document)!=="undefined"?a(window.top.document.getElementsByTagName("iframe")):[];for(var y=0;y<A.length;y++){if(A.eq(y)[0].src.indexOf(window.location.hostname)<0){continue}z=z.add(a(window.top.document.getElementsByTagName("iframe")[y].contentDocument.getElementsByClassName("pageNumberBox")))}return z};var v=function(){if(window){var i=f();i.removeClass("current");if(g.is(":visible")||i.filter(":visible").length===0){g.addClass("current")}g.one("mouseenter",this,k);if(window!==window.top){a(window.top).off("keyup").on("keyup",m)}a(window).off("keyup").on("keyup",m);if(w.callback){w.callback.call(this,w.callbackArr)}}else{setTimeout(v,100)}};if(w.keyEvent!==false){v()}if(w.callback){w.callback.call(this,w.callbackArr)}return this.each(function(){})}})})(jQuery);